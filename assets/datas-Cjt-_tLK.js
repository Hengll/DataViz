import{ar as kt,q as C,r as _,d as k,j as $,Q as He,as as le,at as ae,G as M,a9 as J,ae as Y,au as X,av as oe,aw as Ge,a7 as be,ax as Ke,a6 as ce,ay as ue,az as ne,aA as Q,C as q,N as Z,g as o,W as j,aB as Vt,O as K,aC as Dt,aD as It,aE as pe,aF as Tt,aG as Ft,E as Ct,c as Se,aH as _t,F as z,p as ve,V as G,U as R,aI as fe,h as ge,t as A,v as Bt,aJ as $t,A as Ot,B as At,D as Rt,aK as Nt,aL as Et,a3 as Mt,_ as jt,b as Lt,T as Ht,e as Gt,o as Kt,f as Ut,w as D,k as me,aq as Te,aj as Fe,ap as Wt,al as Ce,am as _e,ao as Be,an as zt,Y as qt}from"./index-BMSylHh_.js";import{c as Qt,a as $e,u as Jt,b as Oe}from"./index.esm-BxOjbTFJ.js";import{P as Yt}from"./papaparse.min-C-8Thp4k.js";import{b as Ae}from"./route-block-B_A1xBdJ.js";import{V as Xt,a as re}from"./VRow-uqQ0KiGU.js";import{V as ye}from"./VDivider-C1_2dD7-.js";import{V as Re}from"./VPagination-XktviH53.js";import{V as Ue,a as xe,b as Zt}from"./VSelect-u-CaeNxI.js";import{V as ea}from"./VContainer-Dl7c3W9Q.js";import{V as ta}from"./VForm-BlWC-sZ-.js";import{V as aa}from"./VTextarea-7hzHtb68.js";import"./VList-D30RNdvD.js";import"./ssrBoot-Bd_Lr6_O.js";import"./VMenu-CPhaIp_q.js";import"./VSelectionControl-B5uYrA7k.js";function Ne(e,l,t){return Object.keys(e).filter(a=>kt(a)&&a.endsWith(l)).reduce((a,n)=>(a[n.slice(0,-l.length)]=r=>e[n](r,t(r)),a),{})}const la=(e,l,t)=>e==null||l==null?-1:e.toString().toLocaleLowerCase().indexOf(l.toString().toLocaleLowerCase()),na=C({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function ra(e,l,t){var u;const a=[],n=(t==null?void 0:t.default)??la,r=t!=null&&t.filterKeys?le(t.filterKeys):!1,s=Object.keys((t==null?void 0:t.customKeyFilter)??{}).length;if(!(e!=null&&e.length))return a;e:for(let i=0;i<e.length;i++){const[d,f=d]=le(e[i]),g={},y={};let p=-1;if((l||s>0)&&!(t!=null&&t.noFilter)){if(typeof d=="object"){const v=r||Object.keys(f);for(const b of v){const m=ae(f,b),I=(u=t==null?void 0:t.customKeyFilter)==null?void 0:u[b];if(p=I?I(m,l,d):n(m,l,d),p!==-1&&p!==!1)I?g[b]=p:y[b]=p;else if((t==null?void 0:t.filterMode)==="every")continue e}}else p=n(d,l,d),p!==-1&&p!==!1&&(y.title=p);const h=Object.keys(y).length,S=Object.keys(g).length;if(!h&&!S||(t==null?void 0:t.filterMode)==="union"&&S!==s&&!h||(t==null?void 0:t.filterMode)==="intersection"&&(S!==s||!h))continue}a.push({index:i,matches:{...y,...g}})}return a}function oa(e,l,t,a){const n=_([]),r=_(new Map),s=k(()=>a!=null&&a.transform?$(l).map(i=>[i,a.transform(i)]):$(l));He(()=>{const i=typeof t=="function"?t():$(t),d=typeof i!="string"&&typeof i!="number"?"":String(i),f=ra(s.value,d,{customKeyFilter:{...e.customKeyFilter,...$(a==null?void 0:a.customKeyFilter)},default:e.customFilter,filterKeys:e.filterKeys,filterMode:e.filterMode,noFilter:e.noFilter}),g=$(l),y=[],p=new Map;f.forEach(h=>{let{index:S,matches:v}=h;const b=g[S];y.push(b),p.set(b.value,v)}),n.value=y,r.value=p});function u(i){return r.value.get(i.value)}return{filteredItems:n,filteredMatches:r,getMatches:u}}const sa=C({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),We=Symbol.for("vuetify:datatable:expanded");function ua(e){const l=M(e,"expandOnClick"),t=J(e,"expanded",e.expanded,u=>new Set(u),u=>[...u.values()]);function a(u,i){const d=new Set(t.value);i?d.add(u.value):d.delete(u.value),t.value=d}function n(u){return t.value.has(u.value)}function r(u){a(u,!n(u))}const s={expand:a,expanded:t,expandOnClick:l,isExpanded:n,toggleExpand:r};return Y(We,s),s}function ze(){const e=X(We);if(!e)throw new Error("foo");return e}const ia=C({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),qe=Symbol.for("vuetify:data-table-group");function da(e){return{groupBy:J(e,"groupBy")}}function ca(e){const{disableSort:l,groupBy:t,sortBy:a}=e,n=_(new Set),r=k(()=>t.value.map(f=>({...f,order:f.order??!1})).concat(l!=null&&l.value?[]:a.value));function s(f){return n.value.has(f.id)}function u(f){const g=new Set(n.value);s(f)?g.delete(f.id):g.add(f.id),n.value=g}function i(f){function g(y){const p=[];for(const h of y.items)"type"in h&&h.type==="group"?p.push(...g(h)):p.push(h);return p}return g({type:"group",items:f,id:"dummy",key:"dummy",value:"dummy",depth:0})}const d={sortByWithGroups:r,toggleGroup:u,opened:n,groupBy:t,extractRows:i,isGroupOpen:s};return Y(qe,d),d}function Qe(){const e=X(qe);if(!e)throw new Error("Missing group!");return e}function fa(e,l){if(!e.length)return[];const t=new Map;for(const a of e){const n=oe(a.raw,l);t.has(n)||t.set(n,[]),t.get(n).push(a)}return t}function Je(e,l){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!l.length)return[];const n=fa(e,l[0]),r=[],s=l.slice(1);return n.forEach((u,i)=>{const d=l[0],f=`${a}_${d}_${i}`;r.push({depth:t,id:f,key:d,value:i,items:s.length?Je(u,s,t+1,f):u,type:"group"})}),r}function Ye(e,l){const t=[];for(const a of e)"type"in a&&a.type==="group"?(a.value!=null&&t.push(a),(l.has(a.id)||a.value==null)&&t.push(...Ye(a.items,l))):t.push(a);return t}function ma(e,l,t){return{flatItems:k(()=>{if(!l.value.length)return e.value;const n=Je(e.value,l.value.map(r=>r.key));return Ye(n,t.value)})}}function va(e){let{page:l,itemsPerPage:t,sortBy:a,groupBy:n,search:r}=e;const s=Ge("VDataTable"),u=k(()=>({page:l.value,itemsPerPage:t.value,sortBy:a.value,groupBy:n.value,search:r.value}));let i=null;be(u,()=>{Ke(i,u.value)||(i&&i.search!==u.value.search&&(l.value=1),s.emit("update:options",u.value),i=u.value)},{deep:!0,immediate:!0})}const ga=C({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),Xe=Symbol.for("vuetify:data-table-pagination");function ya(e){const l=J(e,"page",void 0,a=>+(a??1)),t=J(e,"itemsPerPage",void 0,a=>+(a??10));return{page:l,itemsPerPage:t}}function ha(e){const{page:l,itemsPerPage:t,itemsLength:a}=e,n=k(()=>t.value===-1?0:t.value*(l.value-1)),r=k(()=>t.value===-1?a.value:Math.min(a.value,n.value+t.value)),s=k(()=>t.value===-1||a.value===0?1:Math.ceil(a.value/t.value));be([l,s],()=>{l.value>s.value&&(l.value=s.value)});function u(y){t.value=y,l.value=1}function i(){l.value=ce(l.value+1,1,s.value)}function d(){l.value=ce(l.value-1,1,s.value)}function f(y){l.value=ce(y,1,s.value)}const g={page:l,itemsPerPage:t,startIndex:n,stopIndex:r,pageCount:s,itemsLength:a,nextPage:i,prevPage:d,setPage:f,setItemsPerPage:u};return Y(Xe,g),g}function ba(){const e=X(Xe);if(!e)throw new Error("Missing pagination!");return e}function pa(e){const l=Ge("usePaginatedItems"),{items:t,startIndex:a,stopIndex:n,itemsPerPage:r}=e,s=k(()=>r.value<=0?t.value:t.value.slice(a.value,n.value));return be(s,u=>{l.emit("update:currentItems",u)}),{paginatedItems:s}}const Sa={showSelectAll:!1,allSelected:()=>[],select:e=>{var a;let{items:l,value:t}=e;return new Set(t?[(a=l[0])==null?void 0:a.value]:[])},selectAll:e=>{let{selected:l}=e;return l}},Ze={showSelectAll:!0,allSelected:e=>{let{currentPage:l}=e;return l},select:e=>{let{items:l,value:t,selected:a}=e;for(const n of l)t?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:l,currentPage:t,selected:a}=e;return Ze.select({items:t,value:l,selected:a})}},et={showSelectAll:!0,allSelected:e=>{let{allItems:l}=e;return l},select:e=>{let{items:l,value:t,selected:a}=e;for(const n of l)t?a.add(n.value):a.delete(n.value);return a},selectAll:e=>{let{value:l,allItems:t,selected:a}=e;return et.select({items:t,value:l,selected:a})}},xa=C({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:Ke}},"DataTable-select"),tt=Symbol.for("vuetify:data-table-selection");function wa(e,l){let{allItems:t,currentPage:a}=l;const n=J(e,"modelValue",e.modelValue,b=>new Set(le(b).map(m=>{var I;return((I=t.value.find(O=>e.valueComparator(m,O.value)))==null?void 0:I.value)??m})),b=>[...b.values()]),r=k(()=>t.value.filter(b=>b.selectable)),s=k(()=>a.value.filter(b=>b.selectable)),u=k(()=>{if(typeof e.selectStrategy=="object")return e.selectStrategy;switch(e.selectStrategy){case"single":return Sa;case"all":return et;case"page":default:return Ze}});function i(b){return le(b).every(m=>n.value.has(m.value))}function d(b){return le(b).some(m=>n.value.has(m.value))}function f(b,m){const I=u.value.select({items:b,value:m,selected:new Set(n.value)});n.value=I}function g(b){f([b],!i([b]))}function y(b){const m=u.value.selectAll({value:b,allItems:r.value,currentPage:s.value,selected:new Set(n.value)});n.value=m}const p=k(()=>n.value.size>0),h=k(()=>{const b=u.value.allSelected({allItems:r.value,currentPage:s.value});return!!b.length&&i(b)}),S=k(()=>u.value.showSelectAll),v={toggleSelect:g,select:f,selectAll:y,isSelected:i,isSomeSelected:d,someSelected:p,allSelected:h,showSelectAll:S};return Y(tt,v),v}function ie(){const e=X(tt);if(!e)throw new Error("Missing selection!");return e}const Pa=C({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),at=Symbol.for("vuetify:data-table-sort");function ka(e){const l=J(e,"sortBy"),t=M(e,"mustSort"),a=M(e,"multiSort");return{sortBy:l,mustSort:t,multiSort:a}}function Va(e){const{sortBy:l,mustSort:t,multiSort:a,page:n}=e,r=i=>{if(i.key==null)return;let d=l.value.map(g=>({...g}))??[];const f=d.find(g=>g.key===i.key);f?f.order==="desc"?t.value?f.order="asc":d=d.filter(g=>g.key!==i.key):f.order="desc":a.value?d=[...d,{key:i.key,order:"asc"}]:d=[{key:i.key,order:"asc"}],l.value=d,n&&(n.value=1)};function s(i){return!!l.value.find(d=>d.key===i.key)}const u={sortBy:l,toggleSort:r,isSorted:s};return Y(at,u),u}function lt(){const e=X(at);if(!e)throw new Error("Missing sort!");return e}function Da(e,l,t,a){const n=ue();return{sortedItems:k(()=>{var s,u;return t.value.length?Ia(l.value,t.value,n.current.value,{transform:a==null?void 0:a.transform,sortFunctions:{...e.customKeySort,...(s=a==null?void 0:a.sortFunctions)==null?void 0:s.value},sortRawFunctions:(u=a==null?void 0:a.sortRawFunctions)==null?void 0:u.value}):l.value})}}function Ia(e,l,t,a){const n=new Intl.Collator(t,{sensitivity:"accent",usage:"sort"});return e.map(s=>[s,a!=null&&a.transform?a.transform(s):s]).sort((s,u)=>{var i,d;for(let f=0;f<l.length;f++){let g=!1;const y=l[f].key,p=l[f].order??"asc";if(p===!1)continue;let h=oe(s[1],y),S=oe(u[1],y),v=s[0].raw,b=u[0].raw;if(p==="desc"&&([h,S]=[S,h],[v,b]=[b,v]),(i=a==null?void 0:a.sortRawFunctions)!=null&&i[y]){const m=a.sortRawFunctions[y](v,b);if(m==null)continue;if(g=!0,m)return m}if((d=a==null?void 0:a.sortFunctions)!=null&&d[y]){const m=a.sortFunctions[y](h,S);if(m==null)continue;if(g=!0,m)return m}if(!g){if(h instanceof Date&&S instanceof Date)return h.getTime()-S.getTime();if([h,S]=[h,S].map(m=>m!=null?m.toString().toLocaleLowerCase():m),h!==S)return ne(h)&&ne(S)?0:ne(h)?-1:ne(S)?1:!isNaN(h)&&!isNaN(S)?Number(h)-Number(S):n.compare(h,S)}}return 0}).map(s=>{let[u]=s;return u})}const nt=C({prevIcon:{type:Q,default:"$prev"},nextIcon:{type:Q,default:"$next"},firstIcon:{type:Q,default:"$first"},lastIcon:{type:Q,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},pageText:{type:String,default:"$vuetify.dataFooter.pageText"},firstPageLabel:{type:String,default:"$vuetify.dataFooter.firstPage"},prevPageLabel:{type:String,default:"$vuetify.dataFooter.prevPage"},nextPageLabel:{type:String,default:"$vuetify.dataFooter.nextPage"},lastPageLabel:{type:String,default:"$vuetify.dataFooter.lastPage"},itemsPerPageOptions:{type:Array,default:()=>[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}]},showCurrentPage:Boolean},"VDataTableFooter"),Ee=q()({name:"VDataTableFooter",props:nt(),setup(e,l){let{slots:t}=l;const{t:a}=ue(),{page:n,pageCount:r,startIndex:s,stopIndex:u,itemsLength:i,itemsPerPage:d,setItemsPerPage:f}=ba(),g=k(()=>e.itemsPerPageOptions.map(y=>typeof y=="number"?{value:y,title:y===-1?a("$vuetify.dataFooter.itemsPerPageAll"):String(y)}:{...y,title:isNaN(Number(y.title))?a(y.title):y.title}));return Z(()=>{var p;const y=Re.filterProps(e);return o("div",{class:"v-data-table-footer"},[(p=t.prepend)==null?void 0:p.call(t),o("div",{class:"v-data-table-footer__items-per-page"},[o("span",null,[a(e.itemsPerPageText)]),o(Ue,{items:g.value,modelValue:d.value,"onUpdate:modelValue":h=>f(Number(h)),density:"compact",variant:"outlined","hide-details":!0},null)]),o("div",{class:"v-data-table-footer__info"},[o("div",null,[a(e.pageText,i.value?s.value+1:0,u.value,i.value)])]),o("div",{class:"v-data-table-footer__pagination"},[o(Re,j({modelValue:n.value,"onUpdate:modelValue":h=>n.value=h,density:"comfortable","first-aria-label":e.firstPageLabel,"last-aria-label":e.lastPageLabel,length:r.value,"next-aria-label":e.nextPageLabel,"previous-aria-label":e.prevPageLabel,rounded:!0,"show-first-last-page":!0,"total-visible":e.showCurrentPage?1:0,variant:"plain"},y),null)])])}),{}}}),se=Vt({align:{type:String,default:"start"},fixed:Boolean,fixedOffset:[Number,String],height:[Number,String],lastFixed:Boolean,noPadding:Boolean,tag:String,width:[Number,String],maxWidth:[Number,String],nowrap:Boolean},(e,l)=>{let{slots:t}=l;const a=e.tag??"td";return o(a,{class:["v-data-table__td",{"v-data-table-column--fixed":e.fixed,"v-data-table-column--last-fixed":e.lastFixed,"v-data-table-column--no-padding":e.noPadding,"v-data-table-column--nowrap":e.nowrap},`v-data-table-column--align-${e.align}`],style:{height:K(e.height),width:K(e.width),maxWidth:K(e.maxWidth),left:K(e.fixedOffset||null)}},{default:()=>{var n;return[(n=t.default)==null?void 0:n.call(t)]}})}),Ta=C({headers:Array},"DataTable-header"),rt=Symbol.for("vuetify:data-table-headers"),ot={title:"",sortable:!1},Fa={...ot,width:48};function Ca(){const l=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).map(t=>({element:t,priority:0}));return{enqueue:(t,a)=>{let n=!1;for(let r=0;r<l.length;r++)if(l[r].priority>a){l.splice(r,0,{element:t,priority:a}),n=!0;break}n||l.push({element:t,priority:a})},size:()=>l.length,count:()=>{let t=0;if(!l.length)return 0;const a=Math.floor(l[0].priority);for(let n=0;n<l.length;n++)Math.floor(l[n].priority)===a&&(t+=1);return t},dequeue:()=>l.shift()}}function he(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(!e.children)l.push(e);else for(const t of e.children)he(t,l);return l}function st(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;for(const t of e)t.key&&l.add(t.key),t.children&&st(t.children,l);return l}function _a(e){if(e.key){if(e.key==="data-table-group")return ot;if(["data-table-expand","data-table-select"].includes(e.key))return Fa}}function we(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.children?Math.max(l,...e.children.map(t=>we(t,l+1))):l}function Ba(e){let l=!1;function t(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(r)if(s&&(r.fixed=!0),r.fixed)if(r.children)for(let u=r.children.length-1;u>=0;u--)t(r.children[u],!0);else l?isNaN(+r.width)&&It(`Multiple fixed columns should have a static width (key: ${r.key})`):r.lastFixed=!0,l=!0;else if(r.children)for(let u=r.children.length-1;u>=0;u--)t(r.children[u]);else l=!1}for(let r=e.length-1;r>=0;r--)t(e[r]);function a(r){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(!r)return s;if(r.children){r.fixedOffset=s;for(const u of r.children)s=a(u,s)}else r.fixed&&(r.fixedOffset=s,s+=parseFloat(r.width||"0")||0);return s}let n=0;for(const r of e)n=a(r,n)}function $a(e,l){const t=[];let a=0;const n=Ca(e);for(;n.size()>0;){let s=n.count();const u=[];let i=1;for(;s>0;){const{element:d,priority:f}=n.dequeue(),g=l-a-we(d);if(u.push({...d,rowspan:g??1,colspan:d.children?he(d).length:1}),d.children)for(const y of d.children){const p=f%1+i/Math.pow(10,a+2);n.enqueue(y,a+g+p)}i+=1,s-=1}a+=1,t.push(u)}return{columns:e.map(s=>he(s)).flat(),headers:t}}function ut(e){const l=[];for(const t of e){const a={..._a(t),...t},n=a.key??(typeof a.value=="string"?a.value:null),r=a.value??n??null,s={...a,key:n,value:r,sortable:a.sortable??(a.key!=null||!!a.sort),children:a.children?ut(a.children):void 0};l.push(s)}return l}function Oa(e,l){const t=_([]),a=_([]),n=_({}),r=_({}),s=_({});He(()=>{var S,v,b;const d=(e.headers||Object.keys(e.items[0]??{}).map(m=>({key:m,title:Dt(m)}))).slice(),f=st(d);(S=l==null?void 0:l.groupBy)!=null&&S.value.length&&!f.has("data-table-group")&&d.unshift({key:"data-table-group",title:"Group"}),(v=l==null?void 0:l.showSelect)!=null&&v.value&&!f.has("data-table-select")&&d.unshift({key:"data-table-select"}),(b=l==null?void 0:l.showExpand)!=null&&b.value&&!f.has("data-table-expand")&&d.push({key:"data-table-expand"});const g=ut(d);Ba(g);const y=Math.max(...g.map(m=>we(m)))+1,p=$a(g,y);t.value=p.headers,a.value=p.columns;const h=p.headers.flat(1);for(const m of h)m.key&&(m.sortable&&(m.sort&&(n.value[m.key]=m.sort),m.sortRaw&&(r.value[m.key]=m.sortRaw)),m.filter&&(s.value[m.key]=m.filter))});const u={headers:t,columns:a,sortFunctions:n,sortRawFunctions:r,filterFunctions:s};return Y(rt,u),u}function de(){const e=X(rt);if(!e)throw new Error("Missing headers!");return e}const it=C({color:String,sticky:Boolean,disableSort:Boolean,multiSort:Boolean,sortAscIcon:{type:Q,default:"$sortAsc"},sortDescIcon:{type:Q,default:"$sortDesc"},headerProps:{type:Object},...pe(),...Tt()},"VDataTableHeaders"),Me=q()({name:"VDataTableHeaders",props:it(),setup(e,l){let{slots:t}=l;const{t:a}=ue(),{toggleSort:n,sortBy:r,isSorted:s}=lt(),{someSelected:u,allSelected:i,selectAll:d,showSelectAll:f}=ie(),{columns:g,headers:y}=de(),{loaderClasses:p}=Ft(e);function h(T,c){if(!(!e.sticky&&!T.fixed))return{position:"sticky",left:T.fixed?K(T.fixedOffset):void 0,top:e.sticky?`calc(var(--v-table-header-height) * ${c})`:void 0}}function S(T){const c=r.value.find(w=>w.key===T.key);return c?c.order==="asc"?e.sortAscIcon:e.sortDescIcon:e.sortAscIcon}const{backgroundColorClasses:v,backgroundColorStyles:b}=Ct(e,"color"),{displayClasses:m,mobile:I}=Se(e),O=k(()=>({headers:y.value,columns:g.value,toggleSort:n,isSorted:s,sortBy:r.value,someSelected:u.value,allSelected:i.value,selectAll:d,getSortIcon:S})),V=k(()=>["v-data-table__th",{"v-data-table__th--sticky":e.sticky},m.value,p.value]),L=T=>{let{column:c,x:w,y:P}=T;const x=c.key==="data-table-select"||c.key==="data-table-expand",B=j(e.headerProps??{},c.headerProps??{});return o(se,j({tag:"th",align:c.align,class:[{"v-data-table__th--sortable":c.sortable&&!e.disableSort,"v-data-table__th--sorted":s(c),"v-data-table__th--fixed":c.fixed},...V.value],style:{width:K(c.width),minWidth:K(c.minWidth),maxWidth:K(c.maxWidth),...h(c,P)},colspan:c.colspan,rowspan:c.rowspan,onClick:c.sortable?()=>n(c):void 0,fixed:c.fixed,nowrap:c.nowrap,lastFixed:c.lastFixed,noPadding:x},B),{default:()=>{var H;const N=`header.${c.key}`,F={column:c,selectAll:d,isSorted:s,toggleSort:n,sortBy:r.value,someSelected:u.value,allSelected:i.value,getSortIcon:S};return t[N]?t[N](F):c.key==="data-table-select"?((H=t["header.data-table-select"])==null?void 0:H.call(t,F))??(f.value&&o(xe,{modelValue:i.value,indeterminate:u.value&&!i.value,"onUpdate:modelValue":d},null)):o("div",{class:"v-data-table-header__content"},[o("span",null,[c.title]),c.sortable&&!e.disableSort&&o(ve,{key:"icon",class:"v-data-table-header__sort-icon",icon:S(c)},null),e.multiSort&&s(c)&&o("div",{key:"badge",class:["v-data-table-header__sort-badge",...v.value],style:b.value},[r.value.findIndex(ee=>ee.key===c.key)+1])])}})},W=()=>{const T=j(e.headerProps??{}??{}),c=k(()=>g.value.filter(P=>(P==null?void 0:P.sortable)&&!e.disableSort)),w=k(()=>{if(g.value.find(x=>x.key==="data-table-select")!=null)return i.value?"$checkboxOn":u.value?"$checkboxIndeterminate":"$checkboxOff"});return o(se,j({tag:"th",class:[...V.value],colspan:y.value.length+1},T),{default:()=>[o("div",{class:"v-data-table-header__content"},[o(Ue,{chips:!0,class:"v-data-table__td-sort-select",clearable:!0,density:"default",items:c.value,label:a("$vuetify.dataTable.sortBy"),multiple:e.multiSort,variant:"underlined","onClick:clear":()=>r.value=[],appendIcon:w.value,"onClick:append":()=>d(!i.value)},{...t,chip:P=>{var x;return o(Zt,{onClick:(x=P.item.raw)!=null&&x.sortable?()=>n(P.item.raw):void 0,onMousedown:B=>{B.preventDefault(),B.stopPropagation()}},{default:()=>[P.item.title,o(ve,{class:["v-data-table__td-sort-icon",s(P.item.raw)&&"v-data-table__td-sort-icon-active"],icon:S(P.item.raw),size:"small"},null)]})}})])]})};Z(()=>I.value?o("tr",null,[o(W,null,null)]):o(z,null,[t.headers?t.headers(O.value):y.value.map((T,c)=>o("tr",null,[T.map((w,P)=>o(L,{column:w,x:P,y:c},null))])),e.loading&&o("tr",{class:"v-data-table-progress"},[o("th",{colspan:g.value.length},[o(_t,{name:"v-data-table-progress",absolute:!0,active:!0,color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0},{default:t.loader})])])]))}}),Aa=C({item:{type:Object,required:!0}},"VDataTableGroupHeaderRow"),Ra=q()({name:"VDataTableGroupHeaderRow",props:Aa(),setup(e,l){let{slots:t}=l;const{isGroupOpen:a,toggleGroup:n,extractRows:r}=Qe(),{isSelected:s,isSomeSelected:u,select:i}=ie(),{columns:d}=de(),f=k(()=>r([e.item]));return()=>o("tr",{class:"v-data-table-group-header-row",style:{"--v-data-table-group-header-row-depth":e.item.depth}},[d.value.map(g=>{var y,p;if(g.key==="data-table-group"){const h=a(e.item)?"$expand":"$next",S=()=>n(e.item);return((y=t["data-table-group"])==null?void 0:y.call(t,{item:e.item,count:f.value.length,props:{icon:h,onClick:S}}))??o(se,{class:"v-data-table-group-header-row__column"},{default:()=>[o(G,{size:"small",variant:"text",icon:h,onClick:S},null),o("span",null,[e.item.value]),o("span",null,[R("("),f.value.length,R(")")])]})}if(g.key==="data-table-select"){const h=s(f.value),S=u(f.value)&&!h,v=b=>i(f.value,b);return((p=t["data-table-select"])==null?void 0:p.call(t,{props:{modelValue:h,indeterminate:S,"onUpdate:modelValue":v}}))??o("td",null,[o(xe,{modelValue:h,indeterminate:S,"onUpdate:modelValue":v},null)])}return o("td",null,null)})])}}),Na=C({index:Number,item:Object,cellProps:[Object,Function],onClick:fe(),onContextmenu:fe(),onDblclick:fe(),...pe()},"VDataTableRow"),Ea=q()({name:"VDataTableRow",props:Na(),setup(e,l){let{slots:t}=l;const{displayClasses:a,mobile:n}=Se(e,"v-data-table__tr"),{isSelected:r,toggleSelect:s,someSelected:u,allSelected:i,selectAll:d}=ie(),{isExpanded:f,toggleExpand:g}=ze(),{toggleSort:y,sortBy:p,isSorted:h}=lt(),{columns:S}=de();Z(()=>o("tr",{class:["v-data-table__tr",{"v-data-table__tr--clickable":!!(e.onClick||e.onContextmenu||e.onDblclick)},a.value],onClick:e.onClick,onContextmenu:e.onContextmenu,onDblclick:e.onDblclick},[e.item&&S.value.map((v,b)=>{const m=e.item,I=`item.${v.key}`,O=`header.${v.key}`,V={index:e.index,item:m.raw,internalItem:m,value:oe(m.columns,v.key),column:v,isSelected:r,toggleSelect:s,isExpanded:f,toggleExpand:g},L={column:v,selectAll:d,isSorted:h,toggleSort:y,sortBy:p.value,someSelected:u.value,allSelected:i.value,getSortIcon:()=>""},W=typeof e.cellProps=="function"?e.cellProps({index:V.index,item:V.item,internalItem:V.internalItem,value:V.value,column:v}):e.cellProps,T=typeof v.cellProps=="function"?v.cellProps({index:V.index,item:V.item,internalItem:V.internalItem,value:V.value}):v.cellProps;return o(se,j({align:v.align,class:{"v-data-table__td--expanded-row":v.key==="data-table-expand","v-data-table__td--select-row":v.key==="data-table-select"},fixed:v.fixed,fixedOffset:v.fixedOffset,lastFixed:v.lastFixed,maxWidth:n.value?void 0:v.maxWidth,noPadding:v.key==="data-table-select"||v.key==="data-table-expand",nowrap:v.nowrap,width:n.value?void 0:v.width},W,T),{default:()=>{var w,P,x,B,N;if(t[I]&&!n.value)return(w=t[I])==null?void 0:w.call(t,V);if(v.key==="data-table-select")return((P=t["item.data-table-select"])==null?void 0:P.call(t,V))??o(xe,{disabled:!m.selectable,modelValue:r([m]),onClick:ge(()=>s(m),["stop"])},null);if(v.key==="data-table-expand")return((x=t["item.data-table-expand"])==null?void 0:x.call(t,V))??o(G,{icon:f(m)?"$collapse":"$expand",size:"small",variant:"text",onClick:ge(()=>g(m),["stop"])},null);const c=A(V.value);return n.value?o(z,null,[o("div",{class:"v-data-table__td-title"},[((B=t[O])==null?void 0:B.call(t,L))??v.title]),o("div",{class:"v-data-table__td-value"},[((N=t[I])==null?void 0:N.call(t,V))??c])]):c}})})]))}}),dt=C({loading:[Boolean,String],loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideNoData:Boolean,items:{type:Array,default:()=>[]},noDataText:{type:String,default:"$vuetify.noDataText"},rowProps:[Object,Function],cellProps:[Object,Function],...pe()},"VDataTableRows"),je=q()({name:"VDataTableRows",inheritAttrs:!1,props:dt(),setup(e,l){let{attrs:t,slots:a}=l;const{columns:n}=de(),{expandOnClick:r,toggleExpand:s,isExpanded:u}=ze(),{isSelected:i,toggleSelect:d}=ie(),{toggleGroup:f,isGroupOpen:g}=Qe(),{t:y}=ue(),{mobile:p}=Se(e);return Z(()=>{var h,S;return e.loading&&(!e.items.length||a.loading)?o("tr",{class:"v-data-table-rows-loading",key:"loading"},[o("td",{colspan:n.value.length},[((h=a.loading)==null?void 0:h.call(a))??y(e.loadingText)])]):!e.loading&&!e.items.length&&!e.hideNoData?o("tr",{class:"v-data-table-rows-no-data",key:"no-data"},[o("td",{colspan:n.value.length},[((S=a["no-data"])==null?void 0:S.call(a))??y(e.noDataText)])]):o(z,null,[e.items.map((v,b)=>{var O;if(v.type==="group"){const V={index:b,item:v,columns:n.value,isExpanded:u,toggleExpand:s,isSelected:i,toggleSelect:d,toggleGroup:f,isGroupOpen:g};return a["group-header"]?a["group-header"](V):o(Ra,j({key:`group-header_${v.id}`,item:v},Ne(t,":group-header",()=>V)),a)}const m={index:b,item:v.raw,internalItem:v,columns:n.value,isExpanded:u,toggleExpand:s,isSelected:i,toggleSelect:d},I={...m,props:j({key:`item_${v.key??v.index}`,onClick:r.value?()=>{s(v)}:void 0,index:b,item:v,cellProps:e.cellProps,mobile:p.value},Ne(t,":row",()=>m),typeof e.rowProps=="function"?e.rowProps({item:m.item,index:m.index,internalItem:m.internalItem}):e.rowProps)};return o(z,{key:I.props.key},[a.item?a.item(I):o(Ea,I.props,a),u(v)&&((O=a["expanded-row"])==null?void 0:O.call(a,m))])})])}),{}}}),ct=C({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...Bt(),...$t(),...Ot(),...At()},"VTable"),Le=q()({name:"VTable",props:ct(),setup(e,l){let{slots:t,emit:a}=l;const{themeClasses:n}=Rt(e),{densityClasses:r}=Nt(e);return Z(()=>o(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!t.top,"v-table--has-bottom":!!t.bottom,"v-table--hover":e.hover},n.value,r.value,e.class],style:e.style},{default:()=>{var s,u,i;return[(s=t.top)==null?void 0:s.call(t),t.default?o("div",{class:"v-table__wrapper",style:{height:K(e.height)}},[o("table",null,[t.default()])]):(u=t.wrapper)==null?void 0:u.call(t),(i=t.bottom)==null?void 0:i.call(t)]}})),{}}}),Ma=C({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},rowProps:[Object,Function],cellProps:[Object,Function],returnObject:Boolean},"DataTable-items");function ja(e,l,t,a){const n=e.returnObject?l:ae(l,e.itemValue),r=ae(l,e.itemSelectable,!0),s=a.reduce((u,i)=>(i.key!=null&&(u[i.key]=ae(l,i.value)),u),{});return{type:"item",key:e.returnObject?ae(l,e.itemValue):n,index:t,value:n,selectable:r,columns:s,raw:l}}function La(e,l,t){return l.map((a,n)=>ja(e,a,n,t))}function Ha(e,l){return{items:k(()=>La(e,e.items,l.value))}}const Ga=C({...dt(),hideDefaultBody:Boolean,hideDefaultFooter:Boolean,hideDefaultHeader:Boolean,width:[String,Number],search:String,...sa(),...ia(),...Ta(),...Ma(),...xa(),...Pa(),...it(),...ct()},"DataTable"),Ka=C({...ga(),...Ga(),...na(),...nt()},"VDataTable"),Ua=q()({name:"VDataTable",props:Ka(),emits:{"update:modelValue":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:groupBy":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,l){let{attrs:t,slots:a}=l;const{groupBy:n}=da(e),{sortBy:r,multiSort:s,mustSort:u}=ka(e),{page:i,itemsPerPage:d}=ya(e),{disableSort:f}=Et(e),{columns:g,headers:y,sortFunctions:p,sortRawFunctions:h,filterFunctions:S}=Oa(e,{groupBy:n,showSelect:M(e,"showSelect"),showExpand:M(e,"showExpand")}),{items:v}=Ha(e,g),b=M(e,"search"),{filteredItems:m}=oa(e,v,b,{transform:U=>U.columns,customKeyFilter:S}),{toggleSort:I}=Va({sortBy:r,multiSort:s,mustSort:u,page:i}),{sortByWithGroups:O,opened:V,extractRows:L,isGroupOpen:W,toggleGroup:T}=ca({groupBy:n,sortBy:r,disableSort:f}),{sortedItems:c}=Da(e,m,O,{transform:U=>({...U.raw,...U.columns}),sortFunctions:p,sortRawFunctions:h}),{flatItems:w}=ma(c,n,V),P=k(()=>w.value.length),{startIndex:x,stopIndex:B,pageCount:N,setItemsPerPage:F}=ha({page:i,itemsPerPage:d,itemsLength:P}),{paginatedItems:H}=pa({items:w,startIndex:x,stopIndex:B,itemsPerPage:d}),ee=k(()=>L(H.value)),{isSelected:mt,select:vt,selectAll:gt,toggleSelect:yt,someSelected:ht,allSelected:bt}=wa(e,{allItems:v,currentPage:ee}),{isExpanded:pt,toggleExpand:St}=ua(e);va({page:i,itemsPerPage:d,sortBy:r,groupBy:n,search:b}),Mt({VDataTableRows:{hideNoData:M(e,"hideNoData"),noDataText:M(e,"noDataText"),loading:M(e,"loading"),loadingText:M(e,"loadingText")}});const E=k(()=>({page:i.value,itemsPerPage:d.value,sortBy:r.value,pageCount:N.value,toggleSort:I,setItemsPerPage:F,someSelected:ht.value,allSelected:bt.value,isSelected:mt,select:vt,selectAll:gt,toggleSelect:yt,isExpanded:pt,toggleExpand:St,isGroupOpen:W,toggleGroup:T,items:ee.value.map(U=>U.raw),internalItems:ee.value,groupedItems:H.value,columns:g.value,headers:y.value}));return Z(()=>{const U=Ee.filterProps(e),xt=Me.filterProps(e),wt=je.filterProps(e),Pt=Le.filterProps(e);return o(Le,j({class:["v-data-table",{"v-data-table--show-select":e.showSelect,"v-data-table--loading":e.loading},e.class],style:e.style},Pt),{top:()=>{var te;return(te=a.top)==null?void 0:te.call(a,E.value)},default:()=>{var te,Pe,ke,Ve,De,Ie;return a.default?a.default(E.value):o(z,null,[(te=a.colgroup)==null?void 0:te.call(a,E.value),!e.hideDefaultHeader&&o("thead",{key:"thead"},[o(Me,xt,a)]),(Pe=a.thead)==null?void 0:Pe.call(a,E.value),!e.hideDefaultBody&&o("tbody",null,[(ke=a["body.prepend"])==null?void 0:ke.call(a,E.value),a.body?a.body(E.value):o(je,j(t,wt,{items:H.value}),a),(Ve=a["body.append"])==null?void 0:Ve.call(a,E.value)]),(De=a.tbody)==null?void 0:De.call(a,E.value),(Ie=a.tfoot)==null?void 0:Ie.call(a,E.value)])},bottom:()=>a.bottom?a.bottom(E.value):!e.hideDefaultFooter&&o(z,null,[o(ye,null,null),o(Ee,U,{prepend:a["footer.prepend"]})])})}),{}}}),Wa={class:"d-flex justify-end"},ft={__name:"datas",setup(e){const{apiAuth:l}=qt(),{t}=Lt(),a=Ht(),n=_(""),r=_([]),s=k(()=>[{title:t("dataSet.dataName"),key:"dataName",sortable:!0},{title:t("dataSet.dataInfo"),key:"dataInfo",sortable:!0},{title:t("dataSet.createdAt"),key:"createdAt",sortable:!0},{title:"",key:"edit",sortable:!1}]),u=_(!1),i=()=>{u.value=!0},d=()=>{u.value=!1,O(),S.value.deleteFileRecord()},f=_({isOpen:!1,id:""}),g=c=>{f.value.id=c,f.value.isOpen=!0},y=()=>{f.value.id="",f.value.isOpen=!1},p=_([]),h=_([]),S=_(null),v=async()=>{try{const{data:c}=await l.get("/dataSet/names");r.value=c.result}catch(c){console.log(c)}};v();const b=Qt({dataName:$e().required(t("api.dataNameRequired")),dataInfo:$e()}),{handleSubmit:m,isSubmitting:I,resetForm:O}=Jt({validationSchema:b}),V=Oe("dataName"),L=Oe("dataInfo"),W=m(async c=>{var P;if((P=p.value[0])!=null&&P.error)return;if(p.value.length===0){a({text:t("api.dataRequired"),snackbarProps:{color:"red"}});return}const w=new FileReader;w.readAsText(p.value[0].file),w.onload=async function(){var B,N;let x;if(p.value[0].file.type==="text/csv")x=Yt.parse(w.result,{header:!0,skipEmptyLines:!0}).data;else if(p.value[0].file.type==="application/json"){if(x=JSON.parse(w.result),!Array.isArray(x)){a({text:t("fileReader.array"),snackbarProps:{color:"red"}});return}for(const F of x){if(typeof F!="object"||F===null||Array.isArray(F)){a({text:t("fileReader.object"),snackbarProps:{color:"red"}});return}for(const H in F)if(typeof F[H]=="object"&&F[H]!==null){a({text:t("fileReader.nested"),snackbarProps:{color:"red"}});return}}}else return;try{await l.post("/dataSet",{dataName:c.dataName,dataInfo:c.dataInfo,data:x}),v(),a({text:t("dataSet.uploadSuccess"),snackbarProps:{color:"green"}}),d()}catch(F){console.log(F),a({text:t("api."+((N=(B=F==null?void 0:F.response)==null?void 0:B.data)==null?void 0:N.message)||"unknownError"),snackbarProps:{color:"red"}})}},w.onerror=function(){a({text:t("fileReader.fail"),snackbarProps:{color:"red"}})}}),T=async c=>{var w,P;try{await l.delete(`/dataSet/${c}`),v(),a({text:t("dataSet.deleteSuccess"),snackbarProps:{color:"green"}}),y()}catch(x){console.log(x),a({text:t("api."+((P=(w=x==null?void 0:x.response)==null?void 0:w.data)==null?void 0:P.message)||"unknownError"),snackbarProps:{color:"red"}})}};return(c,w)=>{const P=Gt("VueFileAgent");return Kt(),Ut(z,null,[o(ea,{fluid:""},{default:D(()=>[o(Xt,null,{default:D(()=>[o(re,{cols:"12"},{default:D(()=>[me("h1",null,A(c.$t("auth.myDataSets")),1)]),_:1}),o(ye),o(re,{cols:"8",class:"d-flex justify-space-between align-center"},{default:D(()=>[o(G,{"prepend-icon":"mdi-upload",variant:"elevated",color:"primary",onClick:i},{default:D(()=>[R(A(c.$t("dataSet.new")),1)]),_:1})]),_:1}),o(re,{cols:"4"},{default:D(()=>[o(Te,{modelValue:n.value,"onUpdate:modelValue":w[0]||(w[0]=x=>n.value=x),"prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue"])]),_:1}),o(re,{cols:"12"},{default:D(()=>[o(Ua,{class:"rounded",height:"580",items:r.value,headers:s.value,search:n.value},{"item.createdAt":D(({value:x})=>[R(A(new Date(x).toLocaleString()),1)]),"item.edit":D(({item:x})=>[me("div",Wa,[o(G,{color:"primary",variant:"outlined",onClick:B=>c.$router.push(`/auth/data/${x._id}`)},{default:D(()=>[R(A(c.$t("dataSet.edit")),1)]),_:2},1032,["onClick"]),o(G,{class:"ms-1",variant:"outlined",onClick:B=>g(x._id)},{default:D(()=>[R(A(c.$t("dataSet.delete")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["items","headers","search"])]),_:1})]),_:1})]),_:1}),o(Be,{modelValue:u.value,"onUpdate:modelValue":w[5]||(w[5]=x=>u.value=x),width:"600"},{default:D(()=>[o(ta,{disabled:$(I),onSubmit:ge($(W),["prevent"])},{default:D(()=>[o(Fe,null,{default:D(()=>[o(Wt,{class:"d-flex align-center"},{default:D(()=>[o(ve,{icon:"mdi-upload",class:"me-1"}),me("span",null,A(c.$t("dataSet.new")),1)]),_:1}),o(Ce,null,{default:D(()=>[o(Te,{modelValue:$(V).value.value,"onUpdate:modelValue":w[1]||(w[1]=x=>$(V).value.value=x),"error-messages":$(V).errorMessage.value,label:c.$t("dataSet.dataName"),variant:"outlined"},null,8,["modelValue","error-messages","label"]),o(aa,{modelValue:$(L).value.value,"onUpdate:modelValue":w[2]||(w[2]=x=>$(L).value.value=x),"error-messages":$(L).errorMessage.value,label:c.$t("dataSet.dataInfo"),variant:"outlined"},null,8,["modelValue","error-messages","label"]),o(P,{ref_key:"fileAgent",ref:S,modelValue:p.value,"onUpdate:modelValue":w[3]||(w[3]=x=>p.value=x),"raw-model-value":h.value,"onUpdate:rawModelValue":w[4]||(w[4]=x=>h.value=x),accept:"application/json,text/csv",deletable:"","max-size":"3MB","help-text":c.$t("fileAgent.helpText"),"error-text":{type:c.$t("fileAgent.errorType"),size:c.$t("fileAgent.errorSize")}},null,8,["modelValue","raw-model-value","help-text","error-text"])]),_:1}),o(_e,null,{default:D(()=>[o(G,{onClick:d},{default:D(()=>[R(A(c.$t("dataSet.cancel")),1)]),_:1}),o(G,{color:"primary",variant:"flat",type:"submit",loading:$(I)},{default:D(()=>[R(A(c.$t("dataSet.upload")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue"]),o(Be,{modelValue:f.value.isOpen,"onUpdate:modelValue":w[7]||(w[7]=x=>f.value.isOpen=x),class:"w-250",onKeydownOnce:w[8]||(w[8]=zt(x=>T(f.value.id),["enter"]))},{default:D(()=>[o(Fe,null,{default:D(()=>[o(Ce,{class:"text-center pa-10"},{default:D(()=>[R(A(c.$t("dataSet.deleteConfirm")),1)]),_:1}),o(ye),o(_e,{class:"d-flex justify-center"},{default:D(()=>[o(G,{color:"primary",variant:"flat",onClick:w[6]||(w[6]=x=>T(f.value.id))},{default:D(()=>[R(A(c.$t("dataSet.confirm")),1)]),_:1}),o(G,{variant:"text",onClick:y},{default:D(()=>[R(A(c.$t("dataSet.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};typeof Ae=="function"&&Ae(ft);const ul=jt(ft,[["__scopeId","data-v-6edee00c"]]);export{ul as default};
