import{_ as U,b as $,T as q,R as L,u as P,e as B,o as C,n as F,w as r,k as i,g as e,m as I,j as s,t as c,h as j,aq as h,V as M,U as _,Y as N}from"./index-CQj0lzTV.js";import{c as D,a as v,u as Q,b}from"./index.esm-Dgpy6Www.js";import{v as E}from"./index-Cg6v6Qfq.js";import{b as V}from"./route-block-B_A1xBdJ.js";import{a as l,V as J}from"./VRow-Bj0CGdzn.js";import{V as Y}from"./VForm-DIldRjYS.js";import{V as z}from"./VContainer-Dd9goq2h.js";const G={class:"user-container"},H={class:"text-center"},K={class:"d-flex justify-center mt-10"},O={class:"text-center"},w={__name:"login",setup(W){const k=new URL("@/assets/logo.png",import.meta.url).href,x=new URL(""+new URL("logo_dark-iAJrQSQx.png",import.meta.url).href,import.meta.url).href,{t}=$(),p=q(),{api:S}=N(),y=L(),g=P(),A=D({account:v().required(t("api.userAccountRequired")).min(4,t("api.userAccountTooShort")).max(20,t("api.userAccountTooLong")).test("isAlphanumeric",t("api.userAccountInvalid"),o=>E.isAlphanumeric(o)),password:v().required(t("api.userPasswordRequired")).min(4,t("api.userPasswordTooShort")).max(20,t("api.userPasswordTooLong"))}),{handleSubmit:R,isSubmitting:f}=Q({validationSchema:A}),d=b("account"),m=b("password"),T=R(async o=>{var n,u;try{const{data:a}=await S.post("/user/login",{account:o.account,password:o.password});g.login(a.result),p({text:t("login.success"),snackbarProps:{color:"green"}}),y.push("/")}catch(a){console.log(a),p({text:t("api."+((u=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:u.message)||"unknownError"),snackbarProps:{color:"red"}})}});return(o,n)=>{const u=B("router-link");return C(),F(z,{class:"d-flex justify-center"},{default:r(()=>[i("div",G,[e(J,null,{default:r(()=>[e(l,{cols:"12",class:"pa-0"},{default:r(()=>[e(I,{src:s(g).theme==="lightTheme"?s(k):s(x)},null,8,["src"])]),_:1}),e(l,{cols:"12"}),e(l,{cols:"12"},{default:r(()=>[i("h1",H,c(o.$t("nav.login")),1)]),_:1}),e(l,{cols:"12"},{default:r(()=>[e(Y,{disabled:s(f),onSubmit:j(s(T),["prevent"])},{default:r(()=>[e(h,{modelValue:s(d).value.value,"onUpdate:modelValue":n[0]||(n[0]=a=>s(d).value.value=a),variant:"outlined","error-messages":s(d).errorMessage.value,label:o.$t("user.account"),counter:"",minlength:"4",maxlength:"20"},null,8,["modelValue","error-messages","label"]),e(h,{modelValue:s(m).value.value,"onUpdate:modelValue":n[1]||(n[1]=a=>s(m).value.value=a),variant:"outlined",type:"password",autocomplete:"","error-messages":s(m).errorMessage.value,label:o.$t("user.password"),counter:"",minlength:"4",maxlength:"20"},null,8,["modelValue","error-messages","label"]),i("div",K,[e(M,{variant:"outlined",loading:s(f),type:"submit",color:"primary"},{default:r(()=>[_(c(o.$t("login.login")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1}),e(l,{cols:"12"}),e(l,{cols:"12"},{default:r(()=>[i("p",O,[i("span",null,c(o.$t("login.firstUse")),1),e(u,{to:"/register",class:"link-register"},{default:r(()=>[_(c(o.$t("login.register")),1)]),_:1})])]),_:1})]),_:1})])]),_:1})}}};typeof V=="function"&&V(w);const re=U(w,[["__scopeId","data-v-52c8b6f2"]]);export{re as default};
