import{_ as T,b as M,T as L,R as P,u as E,e as F,o as I,n as B,w as l,k as n,g as s,m as j,j as e,t as p,h as D,ar as i,V as Q,U as _,Y as z}from"./index-Dmk4SA0r.js";import{c as J,a as m,f as K,u as O,b as d}from"./index.esm-Ch7Zp0lJ.js";import{v as k}from"./index-4khYo7ZV.js";import{b as U}from"./route-block-B_A1xBdJ.js";import{a as u,V as Y}from"./VRow-k7vr7YzK.js";import{V as G}from"./VForm-CzV_0abM.js";import{V as H}from"./VContainer-DIX44aNH.js";const W={class:"user-container"},X={class:"text-center"},Z={class:"d-flex justify-center mt-10"},ee={class:"text-center"},$={__name:"register",setup(ae){const x=new URL(""+new URL("logo-CKDzbcxp.png",import.meta.url).href,import.meta.url).href,N=new URL(""+new URL("logo_dark-iAJrQSQx.png",import.meta.url).href,import.meta.url).href,{t:o}=M(),{api:R}=z(),b=L(),S=P(),y=E(),C=J({account:m().required(o("api.userAccountRequired")).min(4,o("api.userAccountTooShort")).max(20,o("api.userAccountTooLong")).test("isAlphanumeric",o("api.userAccountInvalid"),a=>k.isAlphanumeric(a)),userName:m().required(o("api.userUserNameRequired")),email:m().required(o("api.userEmailRequired")).test("isEmail",o("api.userEmailInvalid"),a=>k.isEmail(a)),password:m().required(o("api.userPasswordRequired")).min(4,o("api.userPasswordTooShort")).max(20,o("api.userPasswordTooLong")),passwordConfirm:m().oneOf([K("password")],o("api.userPasswordNotMatch"))}),{handleSubmit:q,isSubmitting:h}=O({validationSchema:C}),g=d("account"),v=d("userName"),f=d("email"),V=d("password"),w=d("passwordConfirm"),A=q(async a=>{var t,c;try{await R.post("/user",{account:a.account,userName:a.userName,email:a.email,password:a.password}),b({text:o("register.success"),snackbarProps:{color:"green"}}),S.push("/login")}catch(r){console.log(r),b({text:o("api."+((c=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:c.message)||"unknownError"),snackbarProps:{color:"red"}})}});return(a,t)=>{const c=F("router-link");return I(),B(H,{class:"d-flex justify-center"},{default:l(()=>[n("div",W,[s(Y,null,{default:l(()=>[s(u,{cols:"12",class:"pa-0"},{default:l(()=>[s(j,{src:e(y).theme==="lightTheme"?e(x):e(N)},null,8,["src"])]),_:1}),s(u,{cols:"12"}),s(u,{cols:"12"},{default:l(()=>[n("h1",X,p(a.$t("nav.register")),1)]),_:1}),s(u,{cols:"12"},{default:l(()=>[s(G,{disabled:e(h),onSubmit:D(e(A),["prevent"])},{default:l(()=>[s(i,{modelValue:e(g).value.value,"onUpdate:modelValue":t[0]||(t[0]=r=>e(g).value.value=r),variant:"outlined","error-messages":e(g).errorMessage.value,label:a.$t("user.account"),counter:"",minlength:"4",maxlength:"20"},null,8,["modelValue","error-messages","label"]),s(i,{modelValue:e(v).value.value,"onUpdate:modelValue":t[1]||(t[1]=r=>e(v).value.value=r),variant:"outlined","error-messages":e(v).errorMessage.value,label:a.$t("user.userName")},null,8,["modelValue","error-messages","label"]),s(i,{modelValue:e(f).value.value,"onUpdate:modelValue":t[2]||(t[2]=r=>e(f).value.value=r),variant:"outlined","error-messages":e(f).errorMessage.value,label:a.$t("user.email")},null,8,["modelValue","error-messages","label"]),s(i,{modelValue:e(V).value.value,"onUpdate:modelValue":t[3]||(t[3]=r=>e(V).value.value=r),variant:"outlined",type:"password",autocomplete:"","error-messages":e(V).errorMessage.value,label:a.$t("user.password"),counter:"",minlength:"4",maxlength:"20"},null,8,["modelValue","error-messages","label"]),s(i,{modelValue:e(w).value.value,"onUpdate:modelValue":t[4]||(t[4]=r=>e(w).value.value=r),variant:"outlined",type:"password",autocomplete:"","error-messages":e(w).errorMessage.value,label:a.$t("user.passwordConfirm"),counter:"",minlength:"4",maxlength:"20"},null,8,["modelValue","error-messages","label"]),n("div",Z,[s(Q,{loading:e(h),variant:"outlined",type:"submit",color:"primary"},{default:l(()=>[_(p(a.$t("register.register")),1)]),_:1},8,["loading"])])]),_:1},8,["disabled","onSubmit"])]),_:1}),s(u,{cols:"12"}),s(u,{cols:"12"},{default:l(()=>[n("p",ee,[n("span",null,p(a.$t("register.notFirstUse")),1),s(c,{to:"/login",class:"link-login"},{default:l(()=>[_(p(a.$t("register.login")),1)]),_:1})])]),_:1})]),_:1})])]),_:1})}}};typeof U=="function"&&U($);const ie=T($,[["__scopeId","data-v-217242d8"]]);export{ie as default};
